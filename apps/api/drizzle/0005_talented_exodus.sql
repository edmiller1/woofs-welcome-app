ALTER TABLE "business" ALTER COLUMN "notification_preferences" SET DEFAULT '{"email":{"reviewReplies":true,"reviewLikes":true,"replyToYourReply":true,"reviewThreadActivity":true,"newReviewsOnFavourites":true,"placeUpdates":true,"claimStatus":true,"reportStatus":true,"marketing":false,"newsletter":false},"push":{"reviewReplies":true,"reviewLikes":true,"replyToYourReply":true,"reviewThreadActivity":true,"newReviewsOnPlaces":true,"nearbyPlaces":false,"claimStatus":true}}'::jsonb;--> statement-breakpoint
ALTER TABLE "user" ALTER COLUMN "notification_preferences" SET DEFAULT '{"email":{"reviewReplies":true,"reviewLikes":true,"replyToYourReply":true,"reviewThreadActivity":true,"newReviewsOnFavourites":true,"marketing":false,"newsletter":false,"nearbyPlaces":false,"reportStatus":true},"push":{"reviewReplies":true,"reviewLikes":true,"replyToYourReply":true,"reviewThreadActivity":true,"newReviewsOnFavourites":true,"nearbyPlaces":false,"replyToReply":true}}'::jsonb;--> statement-breakpoint
ALTER TABLE "notification" ADD COLUMN "related_reply_id" uuid;--> statement-breakpoint
ALTER TABLE "notification" ADD CONSTRAINT "notification_related_reply_id_review_reply_id_fk" FOREIGN KEY ("related_reply_id") REFERENCES "public"."review_reply"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
ALTER TABLE "review" DROP COLUMN "is_first_visit";